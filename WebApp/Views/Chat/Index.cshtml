@* @{
    Layout = "~/Views/Shared/_LayoutIntroduce.cshtml";
}
<div>
    <textarea id="userMessage" placeholder="Nhập câu hỏi về dịch vụ..."></textarea>
    <button onclick="sendMessage()">Gửi</button>
</div>

<div id="chatBox" style="margin-top: 20px;"></div>

@section Scripts {
    <script>
        const sessionId = localStorage.getItem("chat_session") || crypto.randomUUID();
        localStorage.setItem("chat_session", sessionId);

        async function sendMessage() {
            const message = document.getElementById("userMessage").value;
            if (!message) return;

            const response = await fetch("/api/admin/chat/tuvan", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    message: message,
                    sessionId: sessionId
                })
            });

            const data = await response.json();
            document.getElementById("chatBox").innerHTML += `
                    <p><strong>Bạn:</strong> ${message}</p>
                    <p><strong>Trợ lý:</strong> ${data.response}</p>
                    <hr/>
                `;

            document.getElementById("userMessage").value = "";
        }
    </script>

}
 *@